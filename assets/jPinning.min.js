!function(a){a.fn.jPinning=function(b){var c={delay:0,onPin:function(){},onUnpin:function(){}},d=a.extend({},c,b),e={lastScrollTop:0,window:a(window),status:"pinned"},f={nav:"pinning-nav",pinned:"pinned",unpinned:"unpinned",top:"pinning-top"},g={debounce:function(a,b,c){var d;return function(){var e=this,f=arguments,g=function(){d=null,c||a.apply(e,f)},h=c&&!d;clearTimeout(d),d=setTimeout(g,b),h&&a.apply(e,f)}},isUnpinned:function(){return"unpinned"==e.status?!0:!1},isPinned:function(){return"pinned"==e.status?!0:!1},prepare:function(){e.target.addClass(f.nav),e.target.css("position","fixed")},pin:function(){g.isUnpinned()&&(e.status="pinned",e.target.removeClass(f.unpinned).addClass(f.pinned),d.onPin.call(e.target))},unpin:function(){g.isPinned()&&(e.status="unpinned",e.target.removeClass(f.pinned).removeClass(f.top).addClass(f.unpinned),d.onUnpin.call(e.target))},pinHandler:function(){var a=e.window.scrollTop(),b=e.window.height();0==a&&e.target.addClass(f.top),a<=e.lastScrollTop&&b>a?g.pin():g.unpin(),e.lastScrollTop=a}};return this.each(function(){e.target=a(this),g.prepare(),a(window).on("scroll",g.debounce(g.pinHandler,d.delay))})}}(jQuery);